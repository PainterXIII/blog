var $jscomp={scope:{},findInternal:function(c,e,b){c instanceof String&&(c=String(c));for(var a=c.length,f=0;f<a;f++){var d=c[f];if(e.call(b,d,f,c))return{i:f,v:d}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[e]=b.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,e,b,a){if(e){b=$jscomp.global;c=c.split(".");for(a=0;a<c.length-1;a++){var f=c[a];f in b||(b[f]={});b=b[f]}c=c[c.length-1];a=b[c];e=e(a);e!=a&&null!=e&&$jscomp.defineProperty(b,c,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,b){return $jscomp.findInternal(this,c,b).v}},"es6-impl","es3");
$(document).ready(function(){var c=function(b,a){this.container=b;this.editor=a;this.spacerIndex=1};c.prototype._encodeHTML=function(b){var a=document.createElement("div");null!=a.textContent?a.textContent=b:a.innerText=b;return a.innerHTML};c.prototype._removeElement=function(b){"string"===typeof b&&(b=document.querySelector(b));b&&("function"===typeof b.remove?b.remove():b.parentNode&&b.parentNode.removeChild(b))};c.prototype.createDialog=function(b,a){return'<div id="mirages-dialog">\n    <div class="wmd-prompt-background"></div>\n    <div class="wmd-prompt-container">\n        <div class="wmd-prompt-dialog" role="dialog">\n            <div>\n                <p><h3>'+
b+'</h3></p>\n            </div>\n            <form id="mirages-dialog-form">\n                '+a+'\n                <button type="button" class="btn btn-s primary" id="mirages-dialog-btn-submit">\u786e\u5b9a</button>\n                <button type="button" class="btn btn-s" id="mirages-dialog-btn-cancel">\u53d6\u6d88</button>\n            </form>\n        </div>\n    </div>\n</div>'};c.prototype._createForm=function(b){for(var a="",c=0;c<b.fields.length;c++){var d=b.fields[c],a=a+('<div class="form-group">\n                <label>'+
d.title+(d.required?"<span style='color: red'>*</span>":"")+":</label>\n");d.type||(d.type="text");if("text"===d.type)a+='<input type="text" name="'+d.name+'" value="'+(d.defaultValue?d.defaultValue:"")+'">';else if("select"===d.type){for(var a=a+('<select name="'+d.name+'">'),e=0;e<d.options.length;e++){var l=d.options[e],m="";d.defaultValue===l&&(m="selected");a+="<option "+m+">"+l+"</option>"}a+="</select>"}else"textarea"===d.type&&(a+='<textarea type="text" name="'+d.name+'" rows="6">'+(d.defaultValue?
this._encodeHTML(d.defaultValue):"")+"</textarea>");a+="</div>"}return this.createDialog(b.title,a)};c.prototype._insertText=function(b){if(document.selection)this.editor.focus(),document.selection.createRange().text=b,this.editor.focus();else if(0<=this.editor.selectionStart){var a=this.editor.selectionStart,c=this.editor.selectionEnd,d=a;this.editor.value=this.editor.value.substring(0,a)+b+this.editor.value.substring(c,this.editor.value.length);d+=b.length;this.editor.focus();this.editor.selectionStart=
d;this.editor.selectionEnd=d}else this.editor.value+=b,this.editor.focus()};c.prototype.addButton=function(b,a,c,d,e){var f=this;$(this.container).append('<li class="wmd-button" id="wmd-mirages-'+b+'-button" title="'+a+'"><i class="fa fa-'+c+'"></i></li>');if(d)$("#wmd-mirages-"+b+"-button").off("click").on("click",function(a){a="";var b=$("body");"function"===typeof d?(b.addClass("dialog-show"),d(b)):(a=f._createForm(d),b.addClass("dialog-show"),b.append(a));$("#mirages-dialog-btn-cancel").off("click").on("click",
function(a){f._removeElement("#mirages-dialog");b.removeClass("dialog-show")});$("#mirages-dialog-btn-submit").off("click").on("click",function(a){for(var d=$("#mirages-dialog-form").serializeArray(),c={},p=0;p<d.length;p++){var g=d[p];if(/^([a-zA-Z0-9]+)\[(\d+)]$/i.test(g.name)){var h=g.name.match(/^([a-zA-Z0-9]+)\[(\d+)]$/i),k=h[1],h=h[2];c[k]||(c[k]=[]);c[k][h]=g.value}else if(/^([a-zA-Z0-9]+)\[(\d+)]\.([a-zA-Z0-9]+)$/i.test(g.name)){var n=g.name.match(/^([a-zA-Z0-9]+)\[(\d+)]\.([a-zA-Z0-9]+)$/i),
k=n[1],h=n[2],n=n[3];c[k]||(c[k]=[]);c[k][h]||(c[k][h]={});c[k][h][n]=g.value}else/^([a-zA-Z0-9]+)\.([a-zA-Z0-9]+)$/i.test(g.name)?(h=g.name.match(/^([a-zA-Z0-9]+)\.([a-zA-Z0-9]+)$/i),k=h[1],h=h[2],c[k]||(c[k]={}),c[k][h]=g.value):c[g.name]=g.value}a=e(c,a);"string"===typeof a&&(f._removeElement("#mirages-dialog"),b.removeClass("dialog-show"),f._insertText(a))})});else $("#wmd-mirages-"+b+"-button").off("click").on("click",function(a){a=e({},a);f._insertText(a)})};c.prototype.addLinkButton=function(b,
a,c,d){$(this.container).append('<li class="wmd-button" id="wmd-mirages-'+b+'-button" title="'+c+'"><a href="'+d+'" target="_blank"><i class="fa fa-'+a+'"/></a></li>')};c.prototype.addSpacer=function(){$(this.container).append('<li class="wmd-spacer" id="wmd-mirages-spacer'+this.spacerIndex+'"></li>');this.spacerIndex++};var e=function(b){b.addSpacer();b.addButton("btn","\u77ed\u4ee3\u7801 - \u6309\u94ae\u6837\u5f0f\u7684\u94fe\u63a5","link",{title:"\u63d2\u5165\u77ed\u4ee3\u7801 - \u6309\u94ae\u6837\u5f0f\u7684\u94fe\u63a5",
fields:[{name:"title",title:"\u94fe\u63a5\u540d\u79f0",required:!0},{name:"link",title:"\u94fe\u63a5\u5730\u5740",required:!0}]},function(a){return a.link?'[button href="'+a.link+'"]'+(a.title?a.title:a.link)+"[/button]":(alert("\u94fe\u63a5\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a"),!1)});b.addButton("tip","\u77ed\u4ee3\u7801 - \u63d0\u793a\u53ca\u8b66\u544a\u6846","exclamation-triangle",{title:"\u63d2\u5165\u77ed\u4ee3\u7801 - \u63d0\u793a\u53ca\u8b66\u544a\u6846",fields:[{name:"type",title:"\u63d0\u793a\u7c7b\u578b",
required:!0,type:"select",options:["info","success","warning","danger"],defaultValue:"info"},{name:"title",title:"\u63d0\u793a\u6807\u9898\uff08\u7528\u4e8e\u52a0\u91cd\u5c55\u793a\uff0c\u53ef\u4e0d\u586b\uff09"},{name:"content",title:"\u63d0\u793a\u5185\u5bb9",required:!0,type:"textarea"}]},function(a){a.content||(a.content="\u63d0\u793a\u5185\u5bb9");return'[tip type="'+a.type+'"'+(a.title?' title="'+a.title+'"':"")+"]\n"+a.content+"\n[/tip]"});b.addButton("file","\u77ed\u4ee3\u7801 - \u4e0b\u8f7d\u6587\u4ef6",
"file-archive-o",{title:"\u63d2\u5165\u77ed\u4ee3\u7801 - \u4e0b\u8f7d\u6587\u4ef6",fields:[{name:"title",title:"\u6587\u4ef6\u540d\u79f0",required:!0},{name:"link",title:"\u6587\u4ef6\u94fe\u63a5\u5730\u5740",required:!0}]},function(a){return a.link?'[file href="'+a.link+'"]'+(a.title?a.title:a.link)+"[/file]":(alert("\u6587\u4ef6\u94fe\u63a5\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a"),!1)});b.addButton("tag","\u77ed\u4ee3\u7801 - \u6807\u7b7e","tag",{title:"\u63d2\u5165\u77ed\u4ee3\u7801 - \u6807\u7b7e",
fields:[{name:"type",title:"\u6807\u7b7e\u989c\u8272",required:!0,type:"select",options:"default primary info success warning danger".split(" "),defaultValue:"default"},{name:"outline",title:"Outline \u6837\u5f0f",required:!0,type:"select",options:["\u662f","\u5426"],defaultValue:"\u5426"},{name:"content",title:"\u6807\u7b7e\u5185\u5bb9",required:!0}]},function(a){return a.content?'[tag type="'+a.type+'"'+("\u662f"===a.outline?" outline":"")+"]"+a.content+"[/tag]":(alert("\u6807\u7b7e\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),
!1)});b.addButton("hide","\u77ed\u4ee3\u7801 - \u5185\u5bb9\u56de\u590d\u53ef\u89c1","eye-slash",{title:"\u63d2\u5165\u77ed\u4ee3\u7801 - \u5185\u5bb9\u56de\u590d\u53ef\u89c1",fields:[{name:"content",title:"\u5185\u5bb9",required:!0,type:"textarea"}]},function(a){return a.content?"[hide]\n"+a.content+"\n[/hide]":(alert("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),!1)});b.addButton("tab","\u77ed\u4ee3\u7801 - \u6807\u7b7e\u5361","window-maximize",function(a){var c=b.createDialog("\u63d2\u5165\u77ed\u4ee3\u7801 - \u6807\u7b7e\u5361",
'\n<button type="button" class="btn btn-s primary" id="btn-tab-add">\u65b0\u5efa\u6807\u7b7e\u9875</button>\n<div class="content-tabs">\n    <div class="content-tabs-head"></div>\n    <div class="content-tabs-body"></div>\n</div>');a.append(c);var d=1,e=1,l=function(){$(".content-tabs-head").append('<div class="content-tab-title" role="tab" data-tab-index="'+d+'">\u6807\u7b7e\u9875 '+e+"</div>");$(".content-tabs-body").append('\n        <div class="content-tab-content" data-tab-index="'+d+'">\n            <div class="form-group">\n                <label>\u6807\u7b7e\u9875\u540d\u79f0<span style="color: red">*</span>:</label>\n                <input type="text" class="input-tab-title" name="tabs['+
(d-1)+'].title" value="\u6807\u7b7e\u9875 '+e+'">\n            </div>\n            <div class="form-group">\n                <label>\u6807\u7b7e\u9875\u5185\u5bb9<span style="color: red">*</span>:</label>\n                <textarea type="text" class="input-tab-content" name="tabs['+(d-1)+'].content" rows="6"></textarea>\n            </div>\n            <button type="button" class="btn btn-s btn-warn btn-tab-delete">\u5220\u9664\u6b64\u6807\u7b7e\u9875</button>\n        </div>');d++;e++},m=function(){$(".content-tab-title").off("click").on("click",
function(a){var b=$(this),c=b.parent();a=c.parent();var d=b.attr("data-tab-index");a.find(".content-tab-title").each(function(){$(this).attr("data-tab-index")===d?$(this).addClass("selected"):$(this).removeClass("selected")});a.find(".content-tab-content").each(function(){$(this).attr("data-tab-index")===d?$(this).addClass("selected"):$(this).removeClass("selected")});a=c.offset().left;var e=b.offset().left,g=c.innerWidth(),b=b.outerWidth(),f=c.scrollLeft();(function(a){0>a&&(a=0);try{a>c[0].scrollWidth-
c.innerWidth()&&(a=c[0].scrollWidth-c.innerWidth())}catch(q){console.error(q)}c.animate({scrollLeft:a},500)})(e+f-a-(g-b)/2)});$(".btn-tab-delete").off("click").on("click",function(a){if(confirm("\u786e\u5b9a\u8981\u5220\u9664\u6b64\u6807\u7b7e\u9875\u5417\uff1f")){a=$(this).parent();var c=a.parent().parent(),b=parseInt(a.attr("data-tab-index")),e=b-1;1>=b&&(e=b+1);c.find(".content-tab-title").each(function(){var a=parseInt($(this).attr("data-tab-index"));a===e?$(this).addClass("selected"):a===b?
$(this).remove():$(this).removeClass("selected")});c.find(".content-tab-content").each(function(){var a=parseInt($(this).attr("data-tab-index"));a===e?$(this).addClass("selected"):a===b?$(this).remove():$(this).removeClass("selected")});d=1;c.find(".content-tab-title").each(function(a){a+2>d&&(d=a+2);var b=$(this),e=parseInt(b.attr("data-tab-index"));b.attr("data-tab-index",a+1);if(b=c.find(".content-tab-content[data-tab-index="+e+"]"))b.attr("data-tab-index",a+1),b.find(".input-tab-title").attr("name",
"tabs["+a+"].title"),b.find(".input-tab-content").attr("name","tabs["+a+"].content")})}});$(".input-tab-title").off("input propertychange").on("input propertychange",function(a){var b=$(this),c=b.parents(".content-tab-content");a=c.parent().parent();c=parseInt(c.attr("data-tab-index"));b=b.val();0>=b.length&&(b="\u6807\u7b7e\u9875");a.find(".content-tab-title[data-tab-index="+c+"]").text(b)})};l();l();$('.content-tab-title[data-tab-index="1"]').addClass("selected");$('.content-tab-content[data-tab-index="1"]').addClass("selected");
m();$("#btn-tab-add").off("click").on("click",function(a){l();m();$('.content-tab-title[data-tab-index="'+(d-1)+'"]').trigger("click")})},function(a){a=a.tabs;if(!a||0>=a.length)return alert("\u6ca1\u6709\u521b\u5efa\u6807\u7b7e\u9875"),!1;var b="";[].forEach.call(a,function(a){a.title||(a.title="\u6807\u7b7e\u9875");a.content||(a.content="\u6807\u7b7e\u9875\u5185\u5bb9");b+='[tab title="'+a.title+'"]\n'+a.content+"\n[/tab]\n\n"});return"[tabs]\n\n"+b+"[/tabs]\n"});b.addButton("collapse","\u77ed\u4ee3\u7801 - \u6298\u53e0\u6846",
"chevron-circle-down",{title:"\u63d2\u5165\u77ed\u4ee3\u7801 - \u6298\u53e0\u6846",fields:[{name:"title",title:"\u6298\u53e0\u6846\u6807\u9898",required:!0},{name:"show",title:"\u662f\u5426\u9ed8\u8ba4\u5c55\u5f00",required:!1,type:"select",options:["\u662f","\u5426"],defaultValue:"\u5426"},{name:"content",title:"\u5185\u5bb9",required:!0,type:"textarea"}]},function(a){return a.title?a.content?'[collapse title="'+a.title+'"'+("\u662f"===a.show?' show="true"':"")+"]\n"+a.content+"\n[/collapse]":(alert("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),
!1):(alert("\u6298\u53e0\u6846\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"),!1)});b.addLinkButton("shortcode-doc","question-circle-o","\u77ed\u4ee3\u7801\u4f7f\u7528\u8bf4\u660e","https://get233.com/archives/mirages-shortcode-docs.html")};(function(){var b=new c(document.querySelector("#wmd-button-row"),document.querySelector("#text"));e(b)})();$("body").addClass("theme-white");$("#text").before('<span class="OwO"></span>');new OwO({logo:"O\u03c9O",container:document.getElementsByClassName("OwO")[0],target:document.getElementById("text"),
api:LocalConst.OWO_API,position:"down",style:"max-width: 100%;",maxHeight:"250px"});520>=window.innerWidth&&$("#custom-field").addClass("fold")});
